# 予定管理アプリ MVP機能スコープ定義書

## 1. フェーズ分けロードマップ

### Phase 1: MVP（初回リリース）— 目標: 開発開始から6-8週間

MVPの核心思想: **「文脈付き提案」を含めることで、ローンチ初日から競合との差別化を実現する。** 天気連携は後回しにし、空き時間の文脈解析に集中する。

| # | 機能 | 優先度 | 説明 |
|---|------|--------|------|
| 1 | ユーザー登録・認証 | P0 | Apple Sign In / LINE Login による簡単登録 |
| 2 | プロフィール設定 | P0 | 名前・アイコン・表示名の設定 |
| 3 | シフト/予定の手動入力 | P0 | カレンダーUI上で「勤務」「予定あり」「空き」をタップで登録 |
| 4 | グループ作成・招待 | P0 | 招待リンクまたはQRコードでグループ作成（最大20人） |
| 5 | グループメンバーの予定一覧表示 | P0 | 全員の予定を重ね合わせたカレンダービュー |
| 6 | 空き時間の自動検出 | P0 | グループ全員が空いている時間帯を自動抽出 |
| 7 | **文脈付き候補日提案** | **P0** | 空き時間の長さ・時間帯に基づく文脈提案（後述） |
| 8 | 候補日の投票・確定フロー | P0 | 提案された候補日に対してメンバーが投票→幹事が確定 |
| 9 | プッシュ通知（基本） | P1 | 予定確定時・新規提案時の通知 |
| 10 | シフトテンプレート | P1 | よく使うシフトパターンの保存・一括入力 |
| 11 | 予定のカテゴリ分け | P1 | 「仕事」「学校」「プライベート」など基本カテゴリ |

#### MVP「文脈付き提案」の詳細仕様

空き時間帯を以下のルールで分類し、自然言語で提案する:

| 空き時間の条件 | 文脈ラベル | 提案例 |
|--------------|-----------|--------|
| 全員終日空き（8h以上） | 一日空き | 「3/22 全員終日空き → 日帰り旅行やテーマパークもOK！」 |
| 全員午後〜夜空き（4-7h） | 半日空き | 「3/15 午後から空き → ショッピング＆ディナー向き」 |
| 全員夜のみ空き（2-4h） | 夜空き | 「3/15 みんな夜空き → 飲み会・ディナーにぴったり！」 |
| 全員ランチ帯空き（1-2h） | ランチ空き | 「3/29 昼だけ空き → ランチ・カフェ向き」 |
| 全員朝のみ空き（1-3h） | 朝空き | 「3/20 午前空き → モーニング・ブランチはいかが？」 |

ロジックはシンプルなルールベースで実装（AI/ML不要）。これだけで十分な差別化になる。

---

### Phase 2: リリース後1-2ヶ月 — 早期追加機能

| # | 機能 | 優先度 | 説明 |
|---|------|--------|------|
| 1 | **天気予報連携** | **P0** | 候補日の天気を表示＋天気に応じたアクティビティ提案 |
| 2 | カレンダーアプリ連携（インポート） | P0 | Apple Calendar / Google Calendar から予定を自動取り込み |
| 3 | 繰り返し予定 | P1 | 毎週月曜は勤務、など繰り返しパターン設定 |
| 4 | 予定の公開範囲設定 | P1 | グループごとに表示する情報の粒度を制御 |
| 5 | 過去の予定履歴 | P1 | 遊んだ履歴の閲覧 |
| 6 | グループ内チャット（軽量） | P2 | 簡単なメッセージ機能（「何する？」「どこ集合？」） |
| 7 | リマインダー通知 | P1 | 確定した予定の前日・当日リマインド |

#### Phase 2「天気連携」の詳細仕様

| 天気 | 提案カテゴリ |
|------|------------|
| 晴れ (25℃+) | BBQ・ビアガーデン・プール・テラス席 |
| 晴れ (15-24℃) | ピクニック・散歩・テーマパーク |
| 晴れ (〜14℃) | 温泉・鍋パーティー |
| 曇り | ショッピング・カフェ巡り |
| 雨 | 映画・ボウリング・カラオケ・美術館 |
| 雪 | スキー・スノボ・温泉 |

---

### Phase 3: 将来（リリース後3ヶ月以降）

| # | 機能 | 優先度 | 説明 |
|---|------|--------|------|
| 1 | AI高度提案 | P1 | 過去の遊び傾向を学習し、好みに合ったアクティビティを提案 |
| 2 | 場所提案 | P1 | 集合場所の中間地点やおすすめスポットの提案 |
| 3 | 割り勘・費用管理 | P2 | 遊びにかかった費用の記録と割り勘 |
| 4 | Android版 | P1 | クロスプラットフォーム展開 |
| 5 | SNS共有 | P2 | 確定した予定をInstagram Stories等にシェア |
| 6 | スタンプ/リアクション | P2 | 予定に対するリアクション機能 |
| 7 | 外部サービス連携 | P2 | ホットペッパー・食べログ等でお店検索 |
| 8 | ウィジェット | P1 | iOS ホーム画面ウィジェットで次の予定表示 |

---

## 2. ユーザーペルソナ

### ペルソナ1: 田中 美咲（たなか みさき）

| 項目 | 詳細 |
|------|------|
| **年齢** | 22歳 |
| **職業** | 大学4年生（カフェでバイト、週3-4日シフト制） |
| **利用シーン** | 大学の友達5-6人グループで月2-3回遊びたい。全員バイトのシフトがバラバラで、LINEグループで「いつ空いてる？」と聞いても返事が遅い・まとまらない |
| **ペインポイント** | ①シフトを毎回手打ちでLINEに送るのが面倒 ②「いつでもいいよ」と言う人が多く幹事の負担が大きい ③結局決まらず流れることが多い |
| **求めること** | シフトを一度入れたら友達に自動共有。候補日を勝手に出してくれれば「ここにしよう」と決めやすい |
| **ITリテラシー** | 高い。新しいアプリへの抵抗感なし。Instagram, TikTok, LINEを常用 |

### ペルソナ2: 鈴木 翔太（すずき しょうた）

| 項目 | 詳細 |
|------|------|
| **年齢** | 27歳 |
| **職業** | IT企業の営業職（平日勤務だが残業時間がバラバラ） |
| **利用シーン** | 大学時代の友人グループ（8人）で3ヶ月に1回くらい集まりたい。社会人になってから全員の予定が合わず、幹事役が毎回大変 |
| **ペインポイント** | ①調整さんを使うが、候補日を出す段階で既に面倒 ②「文脈」がないので、2時間の空きと8時間の空きが同列に扱われる ③天気が悪くてアウトドア計画が台無しになった経験あり |
| **求めること** | 予定を登録しておけば自動で「この日に飲みに行けるよ」と教えてくれるアプリ。幹事の負担を限りなくゼロにしたい |
| **ITリテラシー** | 中〜高。効率化ツールには積極的だが、設定が複雑だと離脱する |

### ペルソナ3: 山本 あかり（やまもと あかり）

| 項目 | 詳細 |
|------|------|
| **年齢** | 19歳 |
| **職業** | 大学1年生（コンビニバイト、週2-3日） |
| **利用シーン** | 新しくできた大学の友達とサークル仲間で頻繁に遊びたい（週1ペース）。でもまだお互いの予定をよく知らない |
| **ペインポイント** | ①まだ仲良くなりきれていない人に「いつ空いてる？」と聞くのは少しハードルが高い ②自分のシフトも毎週変わるので把握しきれない ③予定を立てるのが苦手で、提案してほしい |
| **求めること** | 予定を共有しておけば自然と遊ぶきっかけができるアプリ。「今度ここ空いてるね」と自動で教えてくれると助かる |
| **ITリテラシー** | 高い。UIがかわいくて直感的なら即使う。口コミで広まる傾向 |

---

## 3. ユーザーストーリー（MVP機能）

### US-01: ユーザー登録

> **田中美咲として**、Apple IDまたはLINEアカウントでワンタップ登録したい。**なぜなら**、新しくアカウントを作る手間があると友達を誘いにくいから。

**受入基準:**
- [ ] Apple Sign In でアカウント作成ができる
- [ ] LINE Login でアカウント作成ができる
- [ ] 登録後、表示名とアイコンの設定画面に遷移する
- [ ] 登録完了まで3タップ以内で完了する
- [ ] 既存アカウントがある場合はログインとして処理される

---

### US-02: シフト/予定の入力

> **田中美咲として**、カレンダー上でタップするだけでシフトと予定を入力したい。**なぜなら**、毎週変わるバイトのシフトを素早く登録して友達と共有したいから。

**受入基準:**
- [ ] カレンダービューで日付をタップすると予定入力モードになる
- [ ] 「勤務/バイト」「予定あり」「空き」の3状態をワンタップで切り替えられる
- [ ] 時間帯（開始・終了）を指定できる
- [ ] 複数日をドラッグで一括選択できる
- [ ] 入力した予定は即座にグループメンバーに反映される

---

### US-03: グループ作成・招待

> **鈴木翔太として**、グループを作成してLINEで招待リンクを送りたい。**なぜなら**、普段使っているLINEから自然に友達を誘えると参加ハードルが下がるから。

**受入基準:**
- [ ] グループ名を入力してグループを作成できる
- [ ] 招待用のURL/QRコードが生成される
- [ ] 招待リンクをLINE/その他のアプリに共有できる（Share Sheet）
- [ ] 招待リンクからアプリを開くとそのグループに自動参加する
- [ ] 1ユーザーが複数グループに所属できる
- [ ] グループの最大人数は20人

---

### US-04: メンバーの予定一覧表示

> **山本あかりとして**、グループメンバー全員の予定を一目で見たい。**なぜなら**、まだ仲良くなりきれていない友達にも「いつ空いてる？」と聞かずに予定を把握できるから。

**受入基準:**
- [ ] グループメンバーの予定が色分けされたカレンダーで表示される
- [ ] 月表示と週表示を切り替えられる
- [ ] 各メンバーの名前・アイコンが表示される
- [ ] 「全員空き」の日/時間帯がハイライトされる
- [ ] タップすると各メンバーの詳細予定が見られる

---

### US-05: 空き時間の自動検出

> **鈴木翔太として**、全員の空き時間を自動で見つけてほしい。**なぜなら**、8人分の予定を自分で照らし合わせるのは現実的でないから。

**受入基準:**
- [ ] グループ内の全員（またはN人以上）が空いている時間帯を自動検出する
- [ ] 「全員一致」「N人以上一致」でフィルタリングできる
- [ ] 直近2週間〜1ヶ月先までの候補を一覧表示する
- [ ] 検出結果は予定の更新に伴いリアルタイムに更新される

---

### US-06: 文脈付き候補日提案

> **田中美咲として**、「この日は飲み会向き」「この日は日帰り旅行できる」と教えてほしい。**なぜなら**、空いている日が分かっても「何する？」が決まらないと結局流れてしまうから。

**受入基準:**
- [ ] 空き時間の長さ・時間帯に基づいて文脈ラベルが自動付与される
- [ ] 以下の5分類以上に対応：一日空き / 半日空き / 夜空き / ランチ空き / 朝空き
- [ ] 各候補日にアクティビティの提案文が表示される
- [ ] 提案はカード形式でスワイプ閲覧できる
- [ ] 候補日の提案は予定更新時に自動再計算される

---

### US-07: 候補日の投票・確定

> **鈴木翔太として**、提案された候補日にメンバーが投票して、多数決で決めたい。**なぜなら**、幹事として全員にメッセージを送って合意を取る手間を省きたいから。

**受入基準:**
- [ ] 候補日に対して「参加OK」「微妙」「NG」の3択で投票できる
- [ ] リアルタイムで投票状況が全員に表示される
- [ ] 未投票のメンバーにリマインド通知を送れる
- [ ] 幹事（グループ作成者）が最終確定できる
- [ ] 確定後、全員にプッシュ通知が届く
- [ ] 確定した予定はカレンダーに自動追加される

---

### US-08: プッシュ通知

> **山本あかりとして**、予定が確定したら通知で教えてほしい。**なぜなら**、アプリを毎回開いて確認するのは面倒だから。

**受入基準:**
- [ ] 新しい候補日が提案されたとき通知が届く
- [ ] 投票リマインド通知が届く
- [ ] 予定が確定したとき通知が届く
- [ ] 通知タップでアプリの該当画面に直接遷移する
- [ ] 通知のオン/オフを設定できる

---

## 4. MVP戦略の判断

### 4-1. 「文脈付き提案」はMVPに含めるべきか？

**結論: YES — 必ず含める（P0）**

理由:
- **最大の差別化ポイント**。これがないと「カレンダー共有アプリ」に過ぎず、TimeTreeやLINEスケジュールと差別化できない
- **技術的にシンプル**。AI/MLは不要で、ルールベースの条件分岐（空き時間の長さ × 時間帯）で実装可能。開発コストは2-3日程度
- **ユーザー体験のコア**。「空いてる日がわかる」→「何ができるかも分かる」の飛躍がこのアプリの価値
- **市場に存在しない**。世界中に文脈付き提案を実装したアプリは0件。MVP段階から差別化を主張できる
- TimeTreeがAI提案を開発中と公言しているため、先行者優位を確保する必要がある

実装方針:
- Phase 1 ではルールベース（if-else）で5パターンの文脈分類
- Phase 3 でユーザー行動学習によるAI提案に進化させる

---

### 4-2. 天気連携はMVPに必要か？

**結論: NO — Phase 2に回す**

理由:
- **外部API依存**が増え、MVP開発の複雑度が上がる
- 天気予報は直近3-5日しか精度が高くないため、1ヶ月先の予定立てには向かない
- 文脈付き提案だけで十分に差別化できる
- Phase 2（リリース後1-2ヶ月）で追加すれば、アップデートのリリース材料にもなる

ただし:
- **APIの調査・選定はMVP開発中に完了**させておく（Phase 2ですぐ実装できるように）
- UI設計時に天気表示スペースを**あらかじめ確保**しておく

---

### 4-3. 最小限のシフト入力UIはどこまで？

**結論: 3段階入力 + テンプレート（P1）**

MVP最小構成:
1. **3状態トグル**: 「勤務/バイト」「予定あり」「空き」をワンタップで切り替え
2. **時間帯指定**: 開始・終了時刻をドラムロール or プリセット（朝/昼/夜）で選択
3. **複数日一括入力**: ドラッグ or 日付複数選択で同じ予定を一括登録

P1で追加:
4. **シフトテンプレート**: 「早番(9-17)」「遅番(14-22)」「夜勤(22-6)」等をプリセット保存

**含めないもの（Phase 2以降）:**
- カレンダーアプリからの自動インポート → Phase 2
- 写真からのシフト表OCR読み取り → Phase 3
- 勤務先のシフト管理システム連携 → Phase 3

---

## 5. KPI定義

### 5-1. ユーザーアクティビティ指標

| KPI | 定義 | MVP目標（リリース3ヶ月後） | 成功基準 |
|-----|------|--------------------------|---------|
| **DAU** | 1日にアプリを開いたユニークユーザー数 | 500 | — |
| **WAU** | 1週間にアプリを開いたユニークユーザー数 | 2,000 | — |
| **MAU** | 1ヶ月にアプリを開いたユニークユーザー数 | 5,000 | — |
| **DAU/MAU比率** | スティッキネス指標 | 10%以上 | 15%以上で優良 |

### 5-2. リテンション指標

| KPI | 定義 | MVP目標 | 業界平均（参考） |
|-----|------|---------|----------------|
| **Day1リテンション** | 登録翌日にアプリを開いた割合 | 40% | 25-30% |
| **Day7リテンション** | 登録7日後にアプリを開いた割合 | 25% | 12-15% |
| **Day30リテンション** | 登録30日後にアプリを開いた割合 | 15% | 6-8% |

※ ソーシャル系アプリは「友達が使っているか」がリテンションに直結するため、グループ作成率が最重要先行指標。

### 5-3. コア機能利用指標

| KPI | 定義 | MVP目標 |
|-----|------|---------|
| **グループ作成数/ユーザー** | 1ユーザーが所属するグループ数の平均 | 1.5以上 |
| **グループサイズ** | 1グループあたりの平均メンバー数 | 4人以上 |
| **予定入力率** | 登録ユーザーのうち予定を1つ以上入力した割合 | 70% |
| **提案閲覧率** | 提案が生成されたグループのうち提案を閲覧した割合 | 80% |
| **提案→投票率** | 提案を閲覧したユーザーが投票した割合 | 50% |
| **提案→確定率** | 提案された候補日が最終的に確定された割合 | 20% |
| **招待成功率** | 送信された招待のうち、受信者が実際に参加した割合 | 30% |

### 5-4. ノーススターメトリック

**「週あたりの確定予定数」（Weekly Confirmed Plans）**

理由:
- このアプリの究極的な価値は「友達との予定が実際に決まること」
- 提案・投票・確定のファネルを包括する上位指標
- この数値が伸びている = ユーザーに価値が届いている

目標: リリース3ヶ月後に **週200件の予定確定**

---

## 6. MVP機能マップ（サマリー）

```
┌─────────────────────────────────────────────────────┐
│                   Phase 1 (MVP)                      │
│                                                      │
│  ┌──────────┐  ┌──────────┐  ┌──────────────────┐   │
│  │ 認証     │  │ 予定入力 │  │ グループ作成     │   │
│  │ (Apple/  │→ │ (3状態   │→ │ (招待リンク/QR)  │   │
│  │  LINE)   │  │  トグル) │  │                  │   │
│  └──────────┘  └──────────┘  └──────────────────┘   │
│       │              │               │               │
│       ▼              ▼               ▼               │
│  ┌──────────────────────────────────────────────┐    │
│  │        全員の予定カレンダービュー              │    │
│  │        (月表示 / 週表示)                      │    │
│  └──────────────────────────────────────────────┘    │
│                      │                               │
│                      ▼                               │
│  ┌──────────────────────────────────────────────┐    │
│  │    ★ 文脈付き候補日提案 ★                    │    │
│  │    「3/15 夜空き → 飲み会にぴったり！」       │    │
│  │    「3/22 終日空き → 日帰り旅行もOK！」       │    │
│  └──────────────────────────────────────────────┘    │
│                      │                               │
│                      ▼                               │
│  ┌──────────────────────────────────────────────┐    │
│  │           投票 → 確定 → 通知                  │    │
│  └──────────────────────────────────────────────┘    │
│                                                      │
└─────────────────────────────────────────────────────┘
         │
         ▼ Phase 2
  ┌──────────────────┐  ┌──────────────────┐
  │ 天気予報連携      │  │ カレンダー連携    │
  │ ☀️→BBQ 🌧️→映画  │  │ (Apple/Google)   │
  └──────────────────┘  └──────────────────┘
         │
         ▼ Phase 3
  ┌──────────────────┐  ┌──────────────────┐
  │ AI高度提案       │  │ Android版        │
  │ (行動学習)       │  │                  │
  └──────────────────┘  └──────────────────┘
```

---

## 7. 競合優位性マトリクス

| 機能 | 本アプリ (MVP) | TimeTree | 調整さん | LINEスケジュール | Howbout |
|------|---------------|----------|---------|----------------|---------|
| シフト/予定共有 | ○ | ◎ | × | △ | ○ |
| グループ管理 | ○ | ◎ | △ | ○ | ○ |
| 空き時間自動検出 | ○ | × | × | × | ○ |
| **文脈付き提案** | **◎** | **×** (開発中) | **×** | **×** | **×** |
| **天気連携** | Phase 2 | × | × | × | × |
| 投票・確定フロー | ○ | × | ◎ | ○ | ○ |
| 使いやすさ | ◎ (目標) | ◎ | ○ | ◎ | ○ |

**MVP段階での明確な差別化**: 文脈付き候補日提案（世界初）
**Phase 2での追加差別化**: 天気予報×候補日連携（世界初）

---

## 8. リスクと軽減策

| リスク | 影響度 | 軽減策 |
|--------|--------|--------|
| TimeTreeがAI提案機能を先にリリース | 高 | MVP開発を最速で進める。ルールベースでもリリースを優先 |
| ユーザーが予定を入力してくれない | 高 | 入力UIを極限までシンプルに。Phase 2でカレンダー連携を追加 |
| グループへの招待が広がらない（コールドスタート問題） | 高 | 招待フローを最適化。「2人から使える」設計にし、少人数でも価値を感じられるようにする |
| 文脈提案の精度が低いと感じられる | 中 | 初期はシンプルな5パターンに絞り、ユーザーフィードバックを収集して改善 |
| プライバシー懸念（予定の共有） | 中 | グループ単位の共有に限定。Phase 2で公開範囲設定を追加 |
